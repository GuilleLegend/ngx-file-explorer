!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-explorer",["exports","@angular/core","rxjs","rxjs/operators","@angular/common"],n):n((e=e||self)["ngx-explorer"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.ng.common)}(this,(function(e,n,t,r,i){"use strict";var o;(o=e.AvialableView||(e.AvialableView={})).List="List",o.Icon="Icon";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},a(e,n)};function s(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}a(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}Object.create;Object.create;var c=new n.InjectionToken("CURRENT_VIEW",{providedIn:"root",factory:function(){return new t.BehaviorSubject(e.AvialableView.Icon)}}),d=new n.InjectionToken("FILTER_STRING",{providedIn:"root",factory:function(){return new t.BehaviorSubject("")}}),l=function(){function e(){}return e.createNode=function(e,n,t){return void 0===e&&(e=0),void 0===n&&(n=!1),{id:++this.id,parentId:e,data:t,isLeaf:n,children:[]}},e.buildBreadcrumbs=function(e,n){for(var t=[],r=n;t.unshift(r),r.parentId;)r=e[r.parentId];return t},e.compareObjects=function(e,n){return JSON.stringify(e)===JSON.stringify(n)},e}();l.id=0;var p=function(){};p.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new p},token:p,providedIn:"root"}),p.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}];var u=function(){function e(e){var n;this.dataService=e,this.internalTree=l.createNode(),this.flatPointers=((n={})[this.internalTree.id]=this.internalTree,n),this.selectedNodes$=new t.BehaviorSubject([]),this.openedNode$=new t.BehaviorSubject(void 0),this.breadcrumbs$=new t.BehaviorSubject([]),this.tree$=new t.BehaviorSubject(this.internalTree),this.selectedNodes=this.selectedNodes$.asObservable(),this.openedNode=this.openedNode$.asObservable(),this.breadcrumbs=this.breadcrumbs$.asObservable(),this.tree=this.tree$.asObservable(),this.openNode(this.internalTree.id)}return e.prototype.selectNodes=function(e){this.selectedNodes$.next(e)},e.prototype.openNode=function(e){var n=this;this.getNodeChildren(e).subscribe((function(){var t=n.flatPointers[e];n.openedNode$.next(t);var r=l.buildBreadcrumbs(n.flatPointers,t);n.breadcrumbs$.next(r),n.selectedNodes$.next([])}))},e.prototype.expandNode=function(e){this.getNodeChildren(e).subscribe()},e.prototype.createNode=function(e){var n=this,t=this.openedNode$.value;this.dataService.createNode(t.data,e).subscribe((function(){n.refresh()}))},e.prototype.refresh=function(){this.openNode(this.openedNode$.value.id)},e.prototype.rename=function(e){var n=this,t=this.selectedNodes$.value;if(t.length>1)throw new Error("Multiple selection rename not supported");if(0===t.length)throw new Error("Nothing selected to rename");var r=t[0];r.isLeaf?this.dataService.renameLeaf(r.data,e).subscribe((function(){n.refresh()})):this.dataService.renameNode(r.data,e).subscribe((function(){n.refresh()}))},e.prototype.remove=function(){var e=this,n=this.selectedNodes$.value;if(0===n.length)throw new Error("Nothing selected to remove");var r=n.map((function(n){return e.flatPointers[n.id]})),i=r.filter((function(e){return!e.isLeaf})).map((function(e){return e.data})),o=r.filter((function(e){return e.isLeaf})).map((function(e){return e.data})),a=i.length?this.dataService.deleteNodes(i):t.of([]),s=o.length?this.dataService.deleteLeafs(o):t.of([]);t.forkJoin([a,s]).subscribe((function(){e.refresh()}))},e.prototype.upload=function(e){var n=this,t=this.openedNode$.value;this.dataService.uploadFiles(t.data,e).subscribe((function(){n.refresh()}))},e.prototype.download=function(){var e=this,n=this.selectedNodes$.value[0];this.dataService.download(n.data).subscribe((function(){e.refresh()}))},e.prototype.getNodeChildren=function(e){var n=this,t=this.flatPointers[e];if(t.isLeaf)throw new Error("Cannot open leaf node");return this.dataService.getNodeChildren(t.data).pipe(r.tap((function(r){var i=r.leafs,o=r.nodes.map((function(n){return l.createNode(e,!1,n)})),a=i.map((function(n){return l.createNode(e,!0,n)})),s=o.concat(a),c=s.filter((function(e){return!t.children.find((function(n){return l.compareObjects(n.data,e.data)}))}));t.children.filter((function(e){return!s.find((function(n){return l.compareObjects(e.data,n.data)}))})).forEach((function(e){var r=t.children.findIndex((function(n){return n.id===e.id}));t.children.splice(r,1),delete n.flatPointers[e.id]})),c.forEach((function(e){t.children.push(e),n.flatPointers[e.id]=e})),t.children.sort((function(e,n){return e.data.name.localeCompare(n.data.name)}));var d=t.children.filter((function(e){return!e.isLeaf})),p=t.children.filter((function(e){return e.isLeaf}));t.children=d.concat(p),n.tree$.next(n.internalTree)})))},e}();u.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new u(n.ɵɵinject(p))},token:u,providedIn:"root"}),u.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],u.ctorParameters=function(){return[{type:p}]};var x=function(){function e(){}return e.prototype.getName=function(e){return null==e?void 0:e.name},e}();x.ɵprov=n.ɵɵdefineInjectable({factory:function(){return new x},token:x,providedIn:"root"}),x.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}];var f=function(){function e(e,n,r){var i=this;this.explorerService=e,this.helperService=n,this.filter=r,this.selection=[],this.items=[],this.dragging=!1,this.subs=new t.Subscription,this.subs.add(this.explorerService.openedNode.subscribe((function(e){i.items=e?e.children:[]}))),this.subs.add(this.explorerService.selectedNodes.subscribe((function(e){i.selection=e||[]})))}return Object.defineProperty(e.prototype,"filteredItems",{get:function(){var e=this,n=this.filter.value;return n?this.items.filter((function(t){return e.helperService.getName(t.data).toLowerCase().includes(n.toLowerCase())})):this.items},enumerable:!1,configurable:!0}),e.prototype.getDisplayName=function(e){return this.helperService.getName(e)},e.prototype.select=function(e,n){var t=this.selection.findIndex((function(e){return e===n})),r=-1!==t,i=e.metaKey||e.ctrlKey||e.shiftKey;r&&i?this.selection.splice(t,1):(i||(this.selection.length=0),this.selection.push(n)),this.explorerService.selectNodes(this.selection)},e.prototype.open=function(e,n){e.metaKey||e.ctrlKey||e.shiftKey||this.explorerService.openNode(n.id)},e.prototype.isSelected=function(e){return-1!==this.selection.indexOf(e)},e.prototype.emptySpaceClick=function(){this.explorerService.selectNodes([])},e.prototype.ngOnDestroy=function(){this.subs.unsubscribe()},e}();f.decorators=[{type:n.Directive}],f.ctorParameters=function(){return[{type:u},{type:x},{type:t.BehaviorSubject,decorators:[{type:n.Inject,args:[d]}]}]};var h=function(e){function n(n,t,r){var i=e.call(this,n,t,r)||this;return i.icons={node:"nxe-folder",leaf:"nxe-doc"},i}return s(n,e),n}(f);h.decorators=[{type:n.Component,args:[{selector:"nxe-icons",template:'<div class="nxe-icons" nxeDragDrop (dragging)="dragging = $event">\n    <div class="nxe-icons-drag" [ngClass]="{ dragging: dragging}"></div>\n    <div class="nxe-icons-backpad" (click)="emptySpaceClick()"></div>\n    <div class="nxe-icons-container">\n        <div class="nxe-icons-wrapper" *ngFor="let item of filteredItems" (dblclick)="open($event, item)" (click)="select($event, item)">\n            <div class="nxe-icons-wrapper-inner" [ngClass]="{\'nxe-icon-selected\':isSelected(item)}" [title]="getDisplayName(item.data)">\n                <div class="nxe-icons-icon">\n                    <i [className]="item.isLeaf ? icons.leaf : icons.node"></i>\n                </div>\n                <div class="nxe-icon-text">{{ getDisplayName(item.data) }}</div>\n            </div>\n        </div>\n    </div>\n</div>',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-icons{height:100%;position:absolute;width:100%}.nxe-icons .nxe-icons-drag{bottom:2px;left:2px;position:absolute;right:2px;top:2px}.nxe-icons .nxe-icons-drag.dragging{border:2px dashed #30a2ff;margin:-2px}.nxe-icons .nxe-icons-backpad{height:100%;left:0;position:absolute;top:0;width:100%}.nxe-icons .nxe-icons-container{display:flex;flex-wrap:wrap}.nxe-icons .nxe-icons-container .nxe-icons-wrapper{display:inline-block;flex-grow:0;height:110px;margin:10px 10px 0;width:80px;z-index:1}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner{border:1px solid transparent;border-radius:5px;padding-bottom:5px;text-align:center}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner:hover{cursor:pointer}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner .nxe-icons-icon{margin-top:5px}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner .nxe-icons-icon i{color:#555;font-size:50px;font-weight:500}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner .nxe-icons-icon i.nxe-folder{color:#fdb900}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner .nxe-icons-icon i.nxe-doc{-webkit-text-stroke:3px #fff}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner.nxe-icon-selected{background-color:#f1f9ff;border:1px solid #94cfff}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icons-wrapper-inner.nxe-icon-selected .nxe-icons-icon i.nxe-doc{-webkit-text-stroke:3px #f1f9ff}.nxe-icons .nxe-icons-container .nxe-icons-wrapper .nxe-icon-text{-webkit-box-orient:vertical;-webkit-line-clamp:3;display:-webkit-box;overflow:hidden;text-align:center;text-overflow:ellipsis}"]}]}],h.ctorParameters=function(){return[{type:u},{type:x},{type:t.BehaviorSubject,decorators:[{type:n.Inject,args:[d]}]}]};var b=function(){function n(n){var r=this;this.currentView=n,this.avialableView=e.AvialableView,this.sub=new t.Subscription,this.sub.add(this.currentView.subscribe((function(e){r.view=e})))}return n.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},n}();b.decorators=[{type:n.Component,args:[{selector:"nxe-explorer",template:'<div class="nxe-explorer">\n    <div class="nxe-eplorer-menu">\n        <nxe-menu-bar></nxe-menu-bar>\n    </div>\n    <div class="nxe-explorer-containers">\n        <div class="nxe-explorer-left-container">\n            <nxe-tree></nxe-tree>\n        </div>\n        <div class="nxe-explorer-right-container">\n            <div class="nxe-explorer-right-menu">\n                <nxe-second-menu-bar></nxe-second-menu-bar>\n            </div>\n            <div class="nxe-explorer-right-content">\n                <ng-container *ngIf="view === avialableView.Icon">\n                    <nxe-icons></nxe-icons>\n                </ng-container>\n                <ng-container *ngIf="view === avialableView.List">\n                    <nxe-list></nxe-list>\n                </ng-container>\n            </div>\n        </div>\n    </div>\n</div> ',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-explorer{border:1px solid #ccc;display:flex;flex-direction:column;height:100%}.nxe-eplorer-menu{border-bottom:1px solid #ccc}.nxe-explorer-containers{display:flex;flex-wrap:wrap;height:100%}.nxe-explorer-left-container{border-right:1px solid #ccc;flex-basis:20rem;flex-grow:1;overflow:auto;position:relative}.nxe-explorer-right-container{display:flex;flex-basis:0;flex-direction:column;flex-grow:999}.nxe-explorer-right-menu{border-bottom:1px solid #ccc}.nxe-explorer-right-content{flex-grow:1;overflow:auto;position:relative}"]}]}],b.ctorParameters=function(){return[{type:t.BehaviorSubject,decorators:[{type:n.Inject,args:[c]}]}]};var v=function(){function e(e,n){var r=this;this.explorerService=e,this.helperService=n,this.canDownload=!1,this.canDelete=!1,this.canRename=!1,this.sub=new t.Subscription,this.selection=[],this.sub.add(this.explorerService.selectedNodes.subscribe((function(e){r.selection=e,r.canDownload=1===e.filter((function(e){return e.isLeaf})).length,r.canDelete=e.length>0,r.canRename=1===e.length})))}return e.prototype.createFolder=function(){var e=prompt("Enter new folder name");e&&this.explorerService.createNode(e)},e.prototype.refresh=function(){this.explorerService.refresh()},e.prototype.rename=function(){if(1===this.selection.length){var e=this.helperService.getName(this.selection[0].data),n=prompt("Enter new name",e);n&&this.explorerService.rename(n)}},e.prototype.remove=function(){confirm("Are you sure you want to delete the selected files?")&&this.explorerService.remove()},e.prototype.openUploader=function(){this.uploader.nativeElement.click()},e.prototype.handleFiles=function(e){this.explorerService.upload(e),this.uploader.nativeElement.value=""},e.prototype.download=function(){this.explorerService.download()},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e}();v.decorators=[{type:n.Component,args:[{selector:"nxe-menu-bar",template:'<div class="nxe-menu-bar">\n    <div class="nxe-menu-bar-left">    \n        <button class="nxe-menu-bar-button" (click)="createFolder()"><i class="nxe-folder" aria-hidden="true"></i>New Folder</button>\n        <button class="nxe-menu-bar-button" (click)="refresh()"><i class="nxe-arrows-cw" aria-hidden="true"></i> Refresh</button>\n        <button class="nxe-menu-bar-button" (click)="openUploader()"><i class="nxe-upload" aria-hidden="true"></i> Upload</button>\n        <button class="nxe-menu-bar-button" [hidden]="!canDownload" (click)="download()"><i class="nxe-download" aria-hidden="true"></i> Download</button>\n        <button class="nxe-menu-bar-button" [hidden]="!canRename" (click)="rename()"><i class="nxe-edit" aria-hidden="true"></i> Rename</button>\n        <button class="nxe-menu-bar-button" [hidden]="!canDelete" (click)="remove()"><i class="nxe-trash-empty" aria-hidden="true"></i> Delete</button>\n    </div>\n\n    <div class="nxe-menu-bar-right">\n        <nxe-view-switcher></nxe-view-switcher>\n    </div>\n    <input style="display: none" type="file" multiple (change)="handleFiles($event.target.files)" #uploader>\n</div>',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-menu-bar{display:flex}.nxe-menu-bar .nxe-menu-bar-left{flex-grow:1;padding:10px}.nxe-menu-bar .nxe-menu-bar-button{background:transparent;border:0;border-radius:5px;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;margin-right:20px;padding:5px}.nxe-menu-bar .nxe-menu-bar-button .nxe-folder{color:#fdb900}.nxe-menu-bar .nxe-menu-bar-button .nxe-arrows-cw{color:green}.nxe-menu-bar .nxe-menu-bar-button .nxe-trash-empty{color:#ca0801}.nxe-menu-bar .nxe-menu-bar-button:hover{background-color:#d7edff}"]}]}],v.ctorParameters=function(){return[{type:u},{type:x}]},v.propDecorators={uploader:[{type:n.ViewChild,args:["uploader",{static:!0}]}]};var g=function(e){this.config=e},m=function(){function e(e,n,r){var i=this;this.explorerService=e,this.helperService=n,this.config=r,this.breadcrumbs=[],this.sub=new t.Subscription,this.sub.add(this.explorerService.breadcrumbs.subscribe((function(e){return i.buildBreadcrumbs(e)})))}return e.prototype.buildBreadcrumbs=function(e){var n=this;this.breadcrumbs=e.map((function(e){return{name:n.helperService.getName(e.data)||n.config.config.homeNodeName,node:e}}))},e.prototype.click=function(e){this.explorerService.openNode(e.node.id)},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e}();m.decorators=[{type:n.Component,args:[{selector:"nxe-breadcrumbs",template:'<div class="nxe-breadcrumbs">\n    <span *ngFor="let crumb of breadcrumbs; last as last">\n        <button (click)="click(crumb)" class="nxe-breadcrumb-button">{{ crumb.name }}</button>\n        <span *ngIf="!last" class="nxe-breadcrumb-separator">\n            <i class="nxe-angle-right" aria-hidden="true"></i>\n        </span>\n    </span>\n</div>',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-breadcrumbs .nxe-breadcrumb-button{background:transparent;border:0;border-radius:5px;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;padding:5px}.nxe-breadcrumbs .nxe-breadcrumb-button:hover{background-color:#d7edff}"]}]}],m.ctorParameters=function(){return[{type:u},{type:x},{type:g}]};var y=function(e){function n(n,t,r){var i=e.call(this,n,t,r)||this;return i.icons={node:"nxe-folder",leaf:"nxe-doc"},i}return s(n,e),n}(f);y.decorators=[{type:n.Component,args:[{selector:"nxe-list",template:'<div class="nxe-list" nxeDragDrop (dragging)="dragging = $event">\n    <div class="nxe-list-drag" [ngClass]="{ dragging: dragging}"></div>\n    <div class="nxe-list-backpad" (click)="emptySpaceClick()"></div>\n    <div class="nxe-list-container">\n        <div class="nxe-list-wrapper ">\n            <table>\n                <thead>\n                    <tr>\n                        <th>Name</th>\n                        <th>Type</th>\n                        <th>Size</th>\n                        <th>Last Modified</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor="let item of filteredItems" (dblclick)="open($event, item)" (click)="select($event, item)"\n                        [ngClass]="{\'nxe-list-row-selected\':isSelected(item)}">\n                        <td>\n                            <span class="nxe-list-icon">\n                                <i [className]="item.isLeaf ? icons.leaf : icons.node"></i>\n                            </span>\n                            {{ getDisplayName(item.data) }}\n                        </td>\n                        <td>{{ item.type }}</td>\n                        <td>{{ item.size }}</td>\n                        <td>{{ item.lastModified }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</div>',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-list{height:100%;position:absolute;width:100%}.nxe-list .nxe-list-drag{bottom:2px;left:2px;position:absolute;right:2px;top:2px;z-index:1}.nxe-list .nxe-list-drag.dragging{border:2px dashed #30a2ff;margin:-2px}.nxe-list .nxe-list-backpad{height:100%;left:0;position:absolute;top:0;width:100%}.nxe-list .nxe-list-container{display:flex;flex-wrap:wrap}.nxe-list .nxe-list-container .nxe-list-wrapper{display:inline-block;flex-grow:0;height:100%;width:100%;z-index:1}.nxe-list .nxe-list-container .nxe-list-wrapper table{border-collapse:collapse;border-spacing:0;width:100%}.nxe-list .nxe-list-container .nxe-list-wrapper table thead{border-bottom:1px solid #ccc}.nxe-list .nxe-list-container .nxe-list-wrapper table thead tr th{border-collapse:collapse;border-right:1px solid #ccc;border-spacing:0;font-weight:400;padding:10px;text-align:left}.nxe-list .nxe-list-container .nxe-list-wrapper table thead tr th:last-child{border-right:none}.nxe-list .nxe-list-container .nxe-list-wrapper table tbody tr:nth-child(2n){background-color:#f4f4f4}.nxe-list .nxe-list-container .nxe-list-wrapper table tbody tr.nxe-list-row-selected,.nxe-list .nxe-list-container .nxe-list-wrapper table tbody tr:hover{background-color:#d7edff}.nxe-list .nxe-list-container .nxe-list-wrapper table tbody tr td{padding:8px 10px}.nxe-list .nxe-list-container .nxe-list-wrapper table tbody tr td .nxe-list-icon{color:#555;margin-right:5px}.nxe-list .nxe-list-container .nxe-list-wrapper table tbody tr td .nxe-list-icon .nxe-folder{color:#fdb900}"]}]}],y.ctorParameters=function(){return[{type:u},{type:x},{type:t.BehaviorSubject,decorators:[{type:n.Inject,args:[d]}]}]};var w=function(){};w.decorators=[{type:n.Component,args:[{selector:"nxe-second-menu-bar",template:'<div class="nxe-second-menu-bar">\n    <div class="nxe-second-menu-bar-left">\n        <nxe-breadcrumbs></nxe-breadcrumbs>\n    </div>\n    <div class="nxe-second-menu-bar-right">\n        <nxe-filter></nxe-filter>\n    </div>\n</div>',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-second-menu-bar{display:flex;padding:10px}.nxe-second-menu-bar .nxe-second-menu-bar-left{flex-grow:1}"]}]}];var N=function(){function n(n){this.currentView=n,this.avialableView=e.AvialableView}return n.prototype.setView=function(e){this.currentView.next(e)},n}();N.decorators=[{type:n.Component,args:[{selector:"nxe-view-switcher",template:'<div class="nxe-view-switcher">\n    <button (click)="setView(avialableView.Icon)"><i class="nxe-th-large" aria-hidden="true"></i></button>\n    <button (click)="setView(avialableView.List)"><i class="nxe-menu" aria-hidden="true"></i></button>\n</div>',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-view-switcher{padding:10px}.nxe-view-switcher button{background:transparent;border:0;border-radius:5px;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;padding:5px}.nxe-view-switcher button:hover{background-color:#d7edff}"]}]}],N.ctorParameters=function(){return[{type:t.BehaviorSubject,decorators:[{type:n.Inject,args:[c]}]}]};var S=function(){function e(e,n){var i=this;this.explorerService=e,this.helperService=n,this.treeNodes=[],this.expandedIds=[],this.sub=new t.Subscription,this.sub.add(this.explorerService.tree.pipe(r.filter((function(e){return!!e}))).subscribe((function(e){i.addExpandedNode(e.id),i.treeNodes=i.buildTree(e).children})))}return e.prototype.open=function(e){this.addExpandedNode(e.id),this.explorerService.openNode(e.id)},e.prototype.expand=function(e){this.addExpandedNode(e.id),this.explorerService.expandNode(e.id)},e.prototype.collapse=function(e){var n;this.removeExpandedNode(e.id),this.sub.add(this.explorerService.tree.pipe(r.filter((function(e){return!!e}))).subscribe((function(e){return n=e}))),this.treeNodes=this.buildTree(n).children},e.prototype.getName=function(e){return this.helperService.getName(e)},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.buildTree=function(e){var n=this,t={id:e.id,parentId:e.parentId,data:e.data,isLeaf:e.isLeaf,children:[],expanded:!1};return t.expanded=this.expandedIds.indexOf(e.id)>-1,t.expanded&&(t.children=e.children.filter((function(e){return!e.isLeaf})).map((function(e){return n.buildTree(e)}))),t},e.prototype.addExpandedNode=function(e){-1===this.expandedIds.indexOf(e)&&this.expandedIds.push(e)},e.prototype.removeExpandedNode=function(e){var n=this.expandedIds.indexOf(e);this.expandedIds.splice(n,1)},e}();S.decorators=[{type:n.Component,args:[{selector:"nxe-tree",template:'<div class="nxe-tree">\n    <ng-container *ngTemplateOutlet="tree;context:{nodes:treeNodes}">\n    </ng-container>\n</div>\n\n<ng-template #tree let-nodes="nodes">\n    <ul *ngIf="nodes && nodes.length > 0">\n        <li *ngFor="let node of nodes">\n            <div class="chevron" *ngIf="!node.expanded" (click)="expand(node)"><i class="nxe-angle-right" aria-hidden="true"></i></div>\n            <div class="chevron" *ngIf="node.expanded" (click)="collapse(node)"><i class="nxe-angle-down" aria-hidden="true"></i></div>\n\n            <div class="item" (dblclick)="open(node)">\n                <div class="folder-icon"><i class="nxe-folder" aria-hidden="true"></i></div>\n                <div class="grow" [innerText]="getName(node.data)"></div>\n                \x3c!-- <div class="ellipsis-icon"><i class="fa fa-ellipsis-v" aria-hidden="true"></i></div> --\x3e\n                <div class="highlighter"></div>\n            </div>\n\n            <ng-container *ngTemplateOutlet="tree;context:{nodes:node.children}">\n            </ng-container>\n        </li>\n    </ul>\n</ng-template> ',encapsulation:n.ViewEncapsulation.None,styles:[".nxe-tree{position:absolute}.nxe-tree ul{list-style-position:inside;margin:0 0 0 20px;padding:0}.nxe-tree li{list-style-type:none;padding:0;position:relative}.nxe-tree .chevron{color:#333;cursor:pointer;font-size:1.3rem;left:-20px;position:absolute;text-align:center;top:1px;width:21px}.nxe-tree .item{border-radius:5px;cursor:pointer;display:flex;padding:5px}.nxe-tree .item .folder-icon{margin-right:5px}.nxe-tree .item .folder-icon i{color:#555;font-weight:500}.nxe-tree .item .folder-icon i.nxe-folder{color:#fdb900}.nxe-tree .item .grow{flex:1}.nxe-tree .item:hover{background-color:#d7edff}"]}]}],S.ctorParameters=function(){return[{type:u},{type:x}]};var k=function(){function e(e,n){var r=this;this.filter=e,this.sub=new t.Subscription,this.sub.add(n.tree.subscribe((function(){r.clear()})))}return e.prototype.onChange=function(e,n){if("Escape"===e.key)return this.input.nativeElement.value="",void this.filter.next("");this.filter.next(n.trim())},e.prototype.clear=function(){this.input&&(this.input.nativeElement.value="",this.filter.next(""))},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e}();k.decorators=[{type:n.Component,args:[{selector:"nxe-filter",template:'<div class="nxe-filter">\n    <input class="nxe-filter-input" type="text" #input (keyup)="onChange($event, input.value)">\n    <button class="nxe-filter-button" (click)="clear()"><i class="nxe-cancel" aria-hidden="true"></i></button>\n</div>',styles:[".nxe-filter .nxe-filter-input{border:1px solid #ccc;font-size:1rem;font-weight:300;padding:.25rem}.nxe-filter .nxe-filter-button{background:transparent;border:0;border-radius:5px;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;margin-left:5px;padding:5px 2px 5px 5px}.nxe-filter .nxe-filter-button:hover{background-color:#d7edff}"]}]}],k.ctorParameters=function(){return[{type:t.BehaviorSubject,decorators:[{type:n.Inject,args:[d]}]},{type:u}]},k.propDecorators={input:[{type:n.ViewChild,args:["input"]}]};var I=function(){function e(e){this.explorerService=e,this.dragEnter=new n.EventEmitter,this.dragOver=new n.EventEmitter,this.dragLeave=new n.EventEmitter,this.dragDrop=new n.EventEmitter,this.dragging=new n.EventEmitter}return e.prototype.onDragEnter=function(e){e.preventDefault(),e.stopPropagation(),this.dragEnter.emit(e),this.dragging.emit(!0)},e.prototype.onDragOver=function(e){e.preventDefault(),e.stopPropagation(),this.dragOver.emit(e),this.dragging.emit(!0)},e.prototype.onDragLeave=function(e){e.preventDefault(),e.stopPropagation(),this.dragLeave.emit(e),this.dragging.emit(!1)},e.prototype.onDrop=function(e){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.files;n.length>0&&(this.explorerService.upload(n),this.dragDrop.emit(n)),this.dragging.emit(!1)},e}();I.decorators=[{type:n.Directive,args:[{selector:"[nxeDragDrop]"}]}],I.ctorParameters=function(){return[{type:u}]},I.propDecorators={dragEnter:[{type:n.Output}],dragOver:[{type:n.Output}],dragLeave:[{type:n.Output}],dragDrop:[{type:n.Output}],dragging:[{type:n.Output}],onDragEnter:[{type:n.HostListener,args:["dragenter",["$event"]]}],onDragOver:[{type:n.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:n.HostListener,args:["dragleave",["$event"]]}],onDrop:[{type:n.HostListener,args:["drop",["$event"]]}]};var E={homeNodeName:"Files"},D=E,j=function(){};j.decorators=[{type:n.NgModule,args:[{declarations:[h,b,v,m,y,w,N,S,k,I],imports:[i.CommonModule],exports:[h,b,v,m,y,w,N,S,k],providers:[{provide:E,useValue:D}]}]}],e.BaseView=f,e.BreadcrumbsComponent=m,e.CURRENT_VIEW=c,e.Config=E,e.ConfigProvider=g,e.DataService=p,e.ExplorerComponent=b,e.ExplorerService=u,e.FILTER_STRING=d,e.FilterComponent=k,e.HelperService=x,e.IconsComponent=h,e.ListComponent=y,e.MenuBarComponent=v,e.NgxExplorerModule=j,e.SecondMenuBarComponent=w,e.TreeComponent=S,e.Utils=l,e.ViewSwitcherComponent=N,e.ɵ0=D,e.ɵa=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-explorer.umd.min.js.map